# ✨ アクリルスタンド工房 (Acrylic Stand Workshop)

オリジナルアクリルスタンドを簡単に作成・注文できるウェブサイト

## 🎯 概要

好きな画像を使って、世界に一つだけのオリジナルアクリルスタンドを作成できるウェブサービスです。透明感のある美しいデザインで、インテリアやデスクの飾りに最適です。

## ✨ 主な機能

### 1. 画像アップロード・編集機能
- ✅ ドラッグ＆ドロップまたはクリックで画像をアップロード
- ✅ 90度単位での回転（左右）
- ✅ サイズ調整（50%〜200%）
- ✅ アクリルスタンドのプレビュー表示
- ✅ 台座デザインの選択（3種類）

### 2. 注文・支払い機能
- ✅ 最小注文数：1個から注文可能
- ✅ サイズ別料金設定
- ✅ PayPay決済フォーム（UIモック）
- ✅ 顧客情報の入力と検証

### 3. サイズ別料金

| サイズ | 料金 | 寸法 |
|--------|------|------|
| カードサイズ | ¥1,000 | 約 86×54mm |
| はがきサイズ | ¥2,000 | 約 148×100mm |
| A5サイズ | ¥3,000 | 約 210×148mm |
| A4サイズ | ¥5,000 | 約 297×210mm |

### 4. ギャラリー機能
- ✅ 作成されたアクリルスタンドのデザイン表示
- ✅ 新着順（降順）で表示
- ✅ LocalStorageによるデータ永続化

## 🎨 デザイン

### カラースキーム
- **基調色**: 白、ライトラベンダー (#E6E6FA)、ライトブルー (#B0E0E6)、ライトピンク (#FFB6C1)
- **モチーフ**: プラスチック、ガラス、プリズムのような透過する媒体
- **特徴**: 透明感・光沢感のあるグラスモーフィズムデザイン

### レスポンシブ対応
- 📱 **モバイル**: 375px〜767px
- 📱 **タブレット**: 768px〜1279px
- 🖥️ **デスクトップ**: 1280px以上

## 🛠️ 技術スタック

### フロントエンド
- **HTML5**: セマンティックHTML、アクセシビリティ対応
- **CSS3**: グラスモーフィズム、グラデーション、アニメーション
- **JavaScript**: Vanilla JS (ES6+)、Canvas API、Fetch API

### バックエンド
- **PHP 7.4+**: PDO、プリペアドステートメント
- **MySQL 5.7+ / MariaDB 10.x**: UTF-8 (utf8mb4) 対応
- **Apache**: .htaccess によるセキュリティ設定

### データ管理
- **サーバーサイド**: MySQL データベース
- **クライアントサイド**: LocalStorage（フォールバック）

## 📁 ファイル構成

```
akuriru-stand/
├── index.html          # メインHTMLファイル
├── css/
│   └── style.css      # スタイルシート
├── js/
│   ├── main.js        # ギャラリー管理、モーダル管理
│   ├── editor.js      # 画像エディタ機能
│   └── payment.js     # 注文・支払い処理（API統合）
├── api/               # バックエンドAPI
│   ├── .htaccess     # セキュリティ設定
│   ├── config.php    # データベース接続設定
│   ├── orders.php    # 注文API（POST/GET）
│   ├── upload.php    # 画像アップロードAPI
│   └── README.md     # API ドキュメント
├── uploads/           # 画像ファイル保存ディレクトリ
│   └── .htaccess     # スクリプト実行禁止設定
├── database/          # データベース関連
│   └── init.sql      # データベース初期化スクリプト
├── admin/             # 管理画面
│   └── index.php     # 注文管理ページ
├── docs/              # ドキュメント
│   ├── DEPLOYMENT.md # Lolipop デプロイメントガイド
│   └── QUICKSTART.md # クイックスタートガイド
└── README.md          # このファイル
```

## 🚀 使い方

### クイックスタート

詳細な手順は [**クイックスタートガイド**](docs/QUICKSTART.md) を参照してください。

### ローカル環境での実行

1. リポジトリをクローン
```bash
git clone https://github.com/Unlce/akuriru-stand.git
cd akuriru-stand
```

2. ローカルサーバーを起動（例：Python）
```bash
python3 -m http.server 8080
```

3. ブラウザで開く
```
http://localhost:8080/index.html
```

### 使い方（ユーザー向け）

1. **画像をアップロード**
   - 「ファイルを選択」ボタンをクリック、またはドラッグ＆ドロップで画像を選択
   - 対応形式: JPG, PNG, GIF, WEBP（最大10MB）

2. **編集・プレビュー**
   - 回転ボタンで画像を90度ずつ回転
   - スライダーでサイズ調整（50%〜200%）
   - お好みの台座デザインを選択

3. **注文**
   - サイズを選択（カード/はがき/A5/A4）
   - 数量を入力（1個から）
   - 「注文する」ボタンをクリック

4. **支払い**
   - お名前、メールアドレス、電話番号、配送先住所を入力
   - 「注文を確定する」ボタンをクリック
   - 注文がサーバーに送信されます（または LocalStorage にバックアップ）

## 🔧 開発者向け

### API エンドポイント

- **POST** `/api/orders.php` - 新規注文作成
- **GET** `/api/orders.php?order_number=XXX` - 注文状態確認
- **POST** `/api/upload.php` - 画像アップロード

詳細は [API ドキュメント](api/README.md) を参照してください。

### データベーススキーマ

5つのテーブルで構成：
- `customers` - 顧客情報
- `orders` - 注文主テーブル
- `order_details` - 注文詳細
- `payments` - 支払い記録
- `order_analytics` - 分析データ

初期化スクリプト: [`database/init.sql`](database/init.sql)

### デプロイメント

Lolipop への詳細なデプロイ手順は [**デプロイメントガイド**](docs/DEPLOYMENT.md) を参照してください。

1. データベース作成
2. ファイルアップロード
3. 設定ファイル編集
4. データベース初期化
5. パーミッション設定

## 🔐 セキュリティ

### 実装されている対策

- ✅ **SQL インジェクション防止**: PDO プリペアドステートメント
- ✅ **XSS 防止**: 入力のサニタイズ、出力のエスケープ
- ✅ **ファイルアップロードセキュリティ**: MIME タイプ検証、ファイルサイズ制限
- ✅ **セキュリティヘッダー**: X-Frame-Options, X-XSS-Protection, CSP
- ✅ **HTTPS 対応**: SSL 証明書の使用推奨
- ✅ **パスワード保護**: 管理画面へのアクセス制限

### セキュリティチェックリスト

- [ ] 管理画面のパスワードを変更（`admin/index.php`）
- [ ] データベースパスワードを強化
- [ ] HTTPS を有効化
- [ ] 本番環境でエラー表示を無効化
- [ ] 定期的なバックアップ

## 🔒 セキュリティ・品質

- ✅ **入力検証**: メールアドレス、電話番号の形式チェック
- ✅ **ファイル検証**: ファイルタイプ・サイズの検証
- ✅ **CodeQL**: セキュリティスキャン合格（0件の脆弱性）
- ✅ **アクセシビリティ**: ARIA属性、キーボードナビゲーション対応
- ✅ **レスポンシブデザイン**: モバイル、タブレット、デスクトップ対応

## 📊 主要機能の実装状況

| 機能 | 状態 | 詳細 |
|------|------|------|
| 画像アップロード | ✅ | ドラッグ＆ドロップ、ファイル選択、サーバーアップロード |
| 画像編集 | ✅ | 回転、スケール調整 |
| プレビュー | ✅ | Canvas APIによるリアルタイム表示 |
| 台座選択 | ✅ | 3種類のデザイン |
| サイズ選択 | ✅ | 4サイズ、料金計算 |
| 注文フォーム | ✅ | 入力検証付き、サーバー送信 |
| 注文API | ✅ | POST/GET、データベース保存 |
| 画像アップロードAPI | ✅ | セキュアなファイル処理 |
| 分析データ収集 | ✅ | デバイス、ブラウザ、セッション情報 |
| 管理画面 | ✅ | 注文一覧、パスワード保護 |
| ギャラリー | ✅ | LocalStorage、新着順表示 |
| レスポンシブ | ✅ | モバイル・タブレット対応 |

## 📝 注意事項

- PayPay支払いはフロントエンドのUIのみ実装（実際のAPI連携なし）
- 画像データはサーバーに保存され、LocalStorageはフォールバックとして機能
- 本番環境で使用する場合は、セキュリティ設定を必ず確認してください
- 管理画面のデフォルトパスワードは必ず変更してください

## 🤝 コントリビューション

バグ報告や機能提案は、GitHubのIssuesでお願いします。

## 📄 ライセンス

© 2024 アクリルスタンド工房. All rights reserved.

## 🔗 スクリーンショット

- [Desktop Homepage](https://github.com/user-attachments/assets/0c7c138a-0d94-459f-9ff3-95a9d1ccc670)
- [Mobile View](https://github.com/user-attachments/assets/f89ac938-c3da-4733-a88b-67f2c9589e59)
- [Editor View](https://github.com/user-attachments/assets/6446cd10-70bd-4868-85aa-c6809e3175d3)
- [Payment Modal](https://github.com/user-attachments/assets/981bbde0-b4ad-44da-9c7c-23704df05568)
